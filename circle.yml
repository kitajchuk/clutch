general:
    branches:
        only:
            - dev
            - master

machine:
    node:
        version: 6.1.0
    timezone:
        America/Los_Angeles

dependencies:
    cache_directories:
        - "node_modules"
    override:
        - npm update properjs-hobo
        - npm install
        - npm rebuild node-sass

test:
    override:
        - echo "test"

deployment:
    staging:
        branch: dev
        commands:
            - npm run build:staging
            - make -f Circlefile deploy_staging
    production:
        branch: master
        commands:
            - npm run build:production
            - make -f Circlefile deploy_production
